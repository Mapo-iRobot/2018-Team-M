# Mission 2
## 경로
|   기호   |           설명            |      점수      |
| :------: | :------------------------ | :------------: |
|    M01   | 탐사 차량 페이로드를 내림 |        22      |
|          | 물자 페이로드를 내림      |        14      |
|          | 승무원 페이로드를 내림    |        10      |
|    M02   | 태양 전지판을 밂          |      18(40)    |
|    M03   | 3D 프린터를 작동시킴      |        18      |
| **총합** |                           |   **82(104)**  |

## 기술적 구현 (하드웨어)


## 기술적 구현 (소프트웨어)

## 코드
```c
#pragma config(Sensor,    S1,        rb,        sensorEV3_Color)
#pragma config(Sensor,    S2,        lb,        sensorEV3_Color)
#pragma config(Sensor,    S3,        rf,        sensorEV3_Color)
#pragma config(Sensor,    S4,        lf,        sensorEV3_Color)
#pragma config(Motor,    motorA,    rw,    tmotorEV3_Large,    PIDControl,    encoder)
#pragma config(Motor,    motorB,    lm,    tmotorEV3_Large,    PIDControl,    encoder)
#pragma config(Motor,    motorC,    rm,    tmotorEV3_Large,    PIDControl,    encoder)
#pragma config(Motor,    motorD,    lw,    tmotorEV3_Large,    PIDControl,    encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

float rfav=0, lfav=0, rbav=0, lbav=0;


//Init Functions
void initAll();
void initEncoder();
void initMotor();

void go(int left, int right);

//Convert Centimeter Distance to Rotation Angle
int cm(float distance);

//Convert Direction of Encoder
int motorEncoder(int index);

//Calculate Average of White
void calcWhite();

//Ignore One Black Line
void ignoreLine();

void initAll()
{
	initMotor();
	initEncoder();
}

void initEncoder()
{
	nMotorEncoder[lw]=0;
	nMotorEncoder[rm]=0;
	nMotorEncoder[lm]=0;
	nMotorEncoder[rw]=0;
}

void initMotor() {
	motor[lw] = 0;
	motor[rw] = 0;
	motor[lm] = 0;
	motor[rm] = 0;
}

int motorEncoder(int index) {
	return nMotorEncoder[index];
}

void calcWhite()
{
	int rbsum=0, lbsum=0, rfsum=0, lfsum=0, count = 0;

	initAll();
	while (motorEncoder(lw) < cm(5)) {
		count++;
		rfsum=rfsum+SensorValue(rf);
		lfsum=lfsum+SensorValue(lf);
		rbsum=rbsum+SensorValue(rb);
		lbsum=lbsum+SensorValue(lb);
		go(40,40);
		delay(3);
	}
	go(0, 0);

	rfav=(rfsum/count)*0.95;
	lfav=(lfsum/count)*0.95;
	rbav=(rbsum/count)*0.95;
	lbav=(lbsum/count)*0.95;
	displayBigTextLine(0, "       L     ");
	displayBigTextLine(2, "    %02d   %02d  ", lbav, lfav);
	displayBigTextLine(4, "    %02d   %02d  ", rbav, rfav);
	displayBigTextLine(6, "       R     ");
	displayBigStringAt(25, 103, "B");
	displayBigStringAt(140, 103, "F");
	displayTextLine(8, "-------------------------------");
}

void go(int left,int right)
{
	motor[lw] = left;
	motor[rw] = right;
}

int cm(float distance)
{
	return (int)(20.46277839811427 * distance);
}

float deg(float degree) {
	return 1.8571428571 * degree;
}

void untilWhiteLine() {
	while(true)
	{
		go(30,30);
		//If White Detected, Break Loop
		if(SensorValue(lb) > lfav || SensorValue(rb) > rfav)
		{
			break;
		}
	}
	go(0, 0);
}

void ignoreLine() {
	untilWhiteLine();
	go(30,30);
	delay(500);
	go(0, 0);
}

task main()
{
	initEncoder();
	calcWhite();

	while (motorEncoder(motorA) < cm(31)) {
		go(40,40);
	}

	initEncoder();
	while (motorEncoder(lw) < 208.928) {
		//displayBigTextLine(9, "%d", motorEncoder(lw));
		go(20, -20);
	}

	go(30, 30);
	delay(1250);

	go(0, 0);
	delay(1000);

	setMotorReversed(lw, true);
	setMotorReversed(rw, true);

	initEncoder();
	untilWhiteLine();
	
	while (-motorEncoder(lw) < cm(10)) {
		go(-20, -20);
	}
	go(0, 0);

	while (motorEncoder(lm) < 120) {
		motor[lm] = 20;
	}
	motor[lm] = 0;
	
	while (motorEncoder(lw) < cm(10)) {
		go(20, 20);
	}
	go(0, 0);
	
	initAll();
	while (SensorValue(rf) < rfav) {
		if (SensorValue(lf) > lfav) {
			go(20, 5);
		}
		else {
			go(5, 20);
		}
	}
	go(0, 0);

	initAll();
	while (-motorEncoder(lw) < cm(15)) {
		go(20, 20);
	}
	go(0, 0);
	delay(1000);

	go(-20, -20);
	delay(1500);


	initEncoder();
	while (motorEncoder(lw) < 417.857) {
		//displayBigTextLine(9, "%d", motorEncoder(lw));
		go(-20, 20);
	}


	setMotorReversed(lw, false);
	setMotorReversed(rw, false);

	while (true) {
		go(-20, -20);
	}
}
```
